{"ast":null,"code":"export function isSubtleCryptoAvailable() {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexport function isNodeCryptoAvailable(withFeature) {\n  try {\n    const resolvedResult = require.resolve('crypto');\n\n    if (!resolvedResult) {\n      return false;\n    }\n\n    const cryptoModule = require('crypto');\n\n    if (!cryptoModule) {\n      return false;\n    }\n\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\nexport async function getCryptoLib() {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto'\n    };\n  } else {\n    try {\n      const nodeCrypto = require('crypto');\n\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto'\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}","map":{"version":3,"sources":["../../src/cryptoUtils.ts"],"names":[],"mappings":"AAEA,OAAM,SAAU,uBAAV,GAAiC;AACrC,SAAO,OAAO,MAAP,KAAkB,WAAlB,IAAiC,OAAO,MAAM,CAAC,MAAd,KAAyB,WAAjE;AACD;AAKD,OAAM,SAAU,qBAAV,CACJ,WADI,EAC8D;AAElE,MAAI;AACF,UAAM,cAAc,GAAG,OAAO,CAAC,OAAR,CAAgB,QAAhB,CAAvB;;AACA,QAAI,CAAC,cAAL,EAAqB;AACnB,aAAO,KAAP;AACD;;AAED,UAAM,YAAY,GAAG,OAAO,CAAC,QAAD,CAA5B;;AACA,QAAI,CAAC,YAAL,EAAmB;AACjB,aAAO,KAAP;AACD;;AACD,QAAI,WAAJ,EAAiB;AACf,YAAM,QAAQ,GAAG,WAAW,CAAC,YAAD,CAA5B;AACA,aAAO,QAAP;AACD;;AACD,WAAO,IAAP;AACD,GAfD,CAeE,OAAO,KAAP,EAAc;AACd,WAAO,KAAP;AACD;AACF;AAED,OAAO,MAAM,aAAa,GACxB,0GADK;AAoBP,OAAO,eAAe,YAAf,GAA2B;AAChC,MAAI,uBAAuB,EAA3B,EAA+B;AAC7B,WAAO;AACL,MAAA,GAAG,EAAE,MAAM,CAAC,MADP;AAEL,MAAA,IAAI,EAAE;AAFD,KAAP;AAID,GALD,MAKO;AACL,QAAI;AAEF,YAAM,UAAU,GAAG,OAAO,CAAC,QAAD,CAA1B;;AACA,aAAO;AACL,QAAA,GAAG,EAAE,UADA;AAEL,QAAA,IAAI,EAAE;AAFD,OAAP;AAID,KAPD,CAOE,OAAO,KAAP,EAAc;AACd,YAAM,IAAI,KAAJ,CAAU,aAAV,CAAN;AACD;AACF;AACF","sourceRoot":"","sourcesContent":["export function isSubtleCryptoAvailable() {\n    return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexport function isNodeCryptoAvailable(withFeature) {\n    try {\n        const resolvedResult = require.resolve('crypto');\n        if (!resolvedResult) {\n            return false;\n        }\n        const cryptoModule = require('crypto');\n        if (!cryptoModule) {\n            return false;\n        }\n        if (withFeature) {\n            const features = withFeature(cryptoModule);\n            return features;\n        }\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\nexport async function getCryptoLib() {\n    if (isSubtleCryptoAvailable()) {\n        return {\n            lib: crypto.subtle,\n            name: 'subtleCrypto',\n        };\n    }\n    else {\n        try {\n            const nodeCrypto = require('crypto');\n            return {\n                lib: nodeCrypto,\n                name: 'nodeCrypto',\n            };\n        }\n        catch (error) {\n            throw new Error(NO_CRYPTO_LIB);\n        }\n    }\n}\n//# sourceMappingURL=cryptoUtils.js.map"]},"metadata":{},"sourceType":"module"}